<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="">2.01</ВерсияФормата>
	<Ид>699d1ea4-f1f6-4ee9-8d95-efd0a597506a    </Ид>
	<Наименование>«Трактиръ: Front-Office», v.3 (3.0.22) — «Трактиръ: Head-Office» (1.0.24)</Наименование>
	<ДатаВремяСоздания>2014-06-19T09:24:53</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="3.0.22.5" СинонимКонфигурации="Трактиръ: Front-Office v3 ПРЕМИУМ">ТрактиръFrontOfficeПРЕМИУМ</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="1.0.24.02" СинонимКонфигурации="«Трактиръ: Head-Office БИЗНЕС», вер. 1.0">ТрактиръHeadOffice</Приемник>
	<ПередВыгрузкойОбъекта>ТипЗначенияОбъекта = ТипЗнч(Объект);

Если Справочники.ТипВсеСсылки().СодержитТип(ТипЗначенияОбъекта) ИЛИ Документы.ТипВсеСсылки().СодержитТип(ТипЗначенияОбъекта)
	ИЛИ ПланыВидовХарактеристик.ТипВсеСсылки().СодержитТип(ТипЗначенияОбъекта) Тогда
	 Если Объект.ПометкаУдаления = Истина Тогда
		  Отказ = Истина;
	 КонецЕсли;
КонецЕсли;</ПередВыгрузкойОбъекта>
	<Параметры>
		<Параметр Имя="НеСоздаватьНовыеЭлементыСправочников              " Наименование="Не создавать новые элементы справочников (Номенклатура, Контрагенты, Склады)" ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="true" ТипЗначения="Булево" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="НеСоздаватьНовыеЭлементыСправочниковКадровыйУчет  " Наименование="Не создавать новые элементы справочников (Справочники кадрового учета)" ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="true" ТипЗначения="Булево" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="ПереноситьНаименования                            " Наименование="Замещать наименования справочников у существующих элементов (Номенклатура, Склады, Сотрудники)" ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="true" ТипЗначения="Булево" ПередаватьПараметрПриВыгрузке="false"/>
	</Параметры>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Правило>
				<Код>Контрагенты</Код>
				<Наименование>Справочник: Контрагенты</Наименование>
				<Порядок>50</Порядок>
				<ПередВыгрузкой>ПреобразованныйКод = ПривестиНомерКДлине(Источник.Код, 5);

Если Источник.Код &lt;&gt; ПривестиНомерКДлине(ПреобразованныйКод, 9)
	И СтрДлина(СокрЛП(Источник.Код)) &gt; 5 Тогда
	Сообщить("Неверный формат кода номенклатуры. Объект не выгружен: " + Источник);
	Отказ = Истина;
КонецЕсли;

НеСоздаватьЕслиНеНайден = Параметры.НеСоздаватьНовыеЭлементыСправочников;</ПередВыгрузкой>
				<Источник>СправочникСсылка.Контрагенты</Источник>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Число"/>
						<ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Код, 5);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>6</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>7</Код>
						<Наименование> --&gt;</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ПередОбработкойВыгрузки>Отказ = Источник.ЭтоГруппа;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>8</Код>
							<Наименование>ИНН --&gt; ИНН</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Адрес --&gt; ЮридическийАдрес</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ЮридическийАдрес" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>Телефон --&gt; КонтактныеТелефоны</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Телефон" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КонтактныеТелефоны" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Номенклатура</Код>
				<Наименование>Справочник: Номенклатура</Наименование>
				<Порядок>150</Порядок>
				<ПередВыгрузкой>Если Лев(Источник.Код, 1) &lt;&gt; "Н" Тогда
	Отказ = Истина;
Иначе
	Код = Сред(Источник.Код, 2);
	ПреобразованныйКод = ПривестиНомерКДлине(Код, 6);
    Если Код &lt;&gt; ПривестиНомерКДлине(ПреобразованныйКод, 10)
		И СтрДлина(СокрЛП(Код)) &gt; 5 Тогда
		Сообщить("Неверный формат кода номенклатуры. Объект не выгружен: " + Источник);
		Отказ = Истина;
	КонецЕсли;
КонецЕсли;

НеСоздаватьЕслиНеНайден = Параметры.НеСоздаватьНовыеЭлементыСправочников;</ПередВыгрузкой>
				<Источник>СправочникСсылка.Номенклатура</Источник>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Число"/>
						<ПередВыгрузкой>Значение = ПривестиНомерКДлине(Сред(Источник.Код, 2), 6);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>7</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>НеЗамещать = НЕ Параметры.ПереноситьНаименования;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>НеЗамещать = НЕ Параметры.ПереноситьНаименования;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>УР_ГруппыОплаты</Код>
				<Наименование>Справочник: Группы оплаты</Наименование>
				<Порядок>200</Порядок>
				<Источник>СправочникСсылка.ГруппыОплаты</Источник>
				<Приемник>СправочникСсылка.УР_ГруппыОплаты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Число"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Склады</Код>
				<Наименование>Справочник: Места реализации</Наименование>
				<Порядок>250</Порядок>
				<ПередВыгрузкой>ПреобразованныйКод = ПривестиНомерКДлине(Источник.Код, 5);

Если Источник.Код &lt;&gt; ПривестиНомерКДлине(ПреобразованныйКод, 9)
	И СтрДлина(СокрЛП(Источник.Код)) &gt; 5 Тогда
	Сообщить("Неверный формат кода места реализации. Объект не выгружен: " + Источник);
	Отказ = Истина;
КонецЕсли;

НеСоздаватьЕслиНеНайден = Параметры.НеСоздаватьНовыеЭлементыСправочников;</ПередВыгрузкой>
				<ПослеЗагрузки>#Если Клиент Тогда
Объект.ТорговыйОбъект = ПараметрыСеанса.ТекущийТО;
Объект.Записать();
#КонецЕсли</ПослеЗагрузки>
				<Источник>СправочникСсылка.МестаРеализации</Источник>
				<Приемник>СправочникСсылка.Склады</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Прав(Источник.Код,5);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>НеЗамещать = НЕ Параметры.ПереноситьНаименования;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Сотрудники</Код>
				<Наименование>Справочник: Сотрудники</Наименование>
				<Порядок>300</Порядок>
				<ПередВыгрузкой>ПреобразованныйКод = ПривестиНомерКДлине(Источник.Код, 5);

Если Источник.Код &lt;&gt; ПривестиНомерКДлине(ПреобразованныйКод, 9)
	И СтрДлина(СокрЛП(Источник.Код)) &gt; 5 Тогда
	Сообщить("Неверный формат кода сотрудника. Объект не выгружен: " + Источник);
	Отказ = Истина;
КонецЕсли;

НеСоздаватьЕслиНеНайден = Параметры.НеСоздаватьНовыеЭлементыСправочников;</ПередВыгрузкой>
				<Источник>СправочникСсылка.Сотрудники</Источник>
				<Приемник>СправочникСсылка.Сотрудники</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Число"/>
						<ПередВыгрузкой>Значение = ПривестиНомерКДлине(Источник.Код, 5);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>НеЗамещать = НЕ Параметры.ПереноситьНаименования;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>5</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Валюты</Код>
				<Наименование>Справочник: Валюты</Наименование>
				<Порядок>350</Порядок>
				<Источник>СправочникСсылка.Валюты</Источник>
				<Приемник>СправочникСсылка.Валюты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПараметрыПрописиНаРусском --&gt; ПараметрыПрописиНаРусском</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПараметрыПрописиНаРусском" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ПараметрыПрописиНаРусском" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ХарактеристикиНоменклатуры</Код>
				<Наименование>Справочник: Номенклатура</Наименование>
				<Порядок>400</Порядок>
				<ПередВыгрузкой>Если Лев(Источник.Код, 1) = "Н" Тогда
	Отказ = Истина;
Иначе
	Код = Сред(Источник.Код, 2);
	ПреобразованныйКод = ПривестиНомерКДлине(Код, 11);
    Если Код &lt;&gt; ПривестиНомерКДлине(ПреобразованныйКод, 10)
		И СтрДлина(СокрЛП(Код)) &gt; 10 Тогда
		Сообщить("Неверный формат кода характеристики номенклатуры. Объект не выгружен: " + Источник + ", код: " + Источник.Код);
		Отказ = Истина;
	КонецЕсли;
КонецЕсли;</ПередВыгрузкой>
				<Источник>СправочникСсылка.Номенклатура</Источник>
				<Приемник>СправочникСсылка.ХарактеристикиНоменклатуры</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>НеЗамещать = НЕ Параметры.ПереноситьНаименования;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Чеки</Код>
				<Наименование>:</Наименование>
				<Порядок>600</Порядок>
				<Приемник>СправочникСсылка.Чеки</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование> --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование> --&gt; ДатаЗакрытия</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДатаЗакрытия" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование> --&gt; ДатаОткрытия</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДатаОткрытия" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование> --&gt; Кассир</Наименование>
						<Порядок>200</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Кассир" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование> --&gt; КассирККМ</Наименование>
						<Порядок>250</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КассирККМ" Вид="Реквизит" Тип="СправочникСсылка.Сотрудники"/>
						<КодПравилаКонвертации>Сотрудники                                        </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>--&gt; Клиент</Наименование>
						<Порядок>300</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Клиент" Вид="Реквизит" Тип="СправочникСсылка.Клиенты"/>
						<КодПравилаКонвертации>Клиенты                                           </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование> --&gt; КодСотрудника</Наименование>
						<Порядок>350</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КодСотрудника" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование> --&gt; КоличествоГостей</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="КоличествоГостей" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>9</Код>
						<Наименование> --&gt; Номер</Наименование>
						<Порядок>450</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Номер" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование> --&gt; НомерРМ</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НомерРМ" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование> --&gt; НомерСмены</Наименование>
						<Порядок>550</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НомерСмены" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>12</Код>
						<Наименование> --&gt; Склад</Наименование>
						<Порядок>600</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование> --&gt; Сотрудник</Наименование>
						<Порядок>650</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Сотрудник" Вид="Реквизит" Тип="СправочникСсылка.Сотрудники"/>
						<КодПравилаКонвертации>Сотрудники                                        </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование> --&gt; Статус</Наименование>
						<Порядок>700</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Статус" Вид="Реквизит" Тип="ПеречислениеСсылка.СтатусыЧеков"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование> --&gt; Сумма</Наименование>
						<Порядок>750</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>16</Код>
						<Наименование> --&gt; ТипЧека</Наименование>
						<Порядок>800</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипЧека" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыЧеков"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование> --&gt; ТО</Наименование>
						<Порядок>850</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТО" Вид="Реквизит" Тип="СправочникСсылка.ТорговоеОборудование"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование> --&gt; ПометкаУдаления</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = ложь;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>19</Код>
						<Наименование> --&gt; Оплата</Наименование>
						<Порядок>950</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Оплата" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>20</Код>
							<Наименование>--&gt; ВидОплаты</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВидыОплаты"/>
							<КодПравилаКонвертации>ВидыОплаты                                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование> --&gt; Сумма</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>22</Код>
						<Наименование> --&gt; Скидки</Наименование>
						<Порядок>1000</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Скидки" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>24</Код>
							<Наименование> --&gt; КодСкидки</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КодСкидки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>28</Код>
							<Наименование> --&gt; Сумма</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>30</Код>
						<Наименование> --&gt; Товары</Наименование>
						<Порядок>1050</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>31</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование> --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>36</Код>
							<Наименование> --&gt; Сумма</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование> --&gt; СуммаСкидки</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаСкидки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование> --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>42</Код>
							<Наименование> --&gt; Цена</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВидыОплаты</Код>
				<Наименование>:</Наименование>
				<Порядок>800</Порядок>
				<Приемник>СправочникСсылка.ВидыОплаты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование> --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование> --&gt; ТипОплаты</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипОплаты" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыОплаты"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование> --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВариантыОплаты</Код>
				<Наименование>Справочник: Варианты оплаты</Наименование>
				<Порядок>850</Порядок>
				<Источник>СправочникСсылка.ВариантыОплаты</Источник>
				<Приемник>СправочникСсылка.УР_ВариантыОплаты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Число"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Тип --&gt; ТипОплаты</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыОплаты"/>
						<Приемник Имя="ТипОплаты" Вид="Реквизит" Тип="ПеречислениеСсылка.УР_ТипыОплаты"/>
						<КодПравилаКонвертации>УР_ТипыОплаты                                     </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Клиенты</Код>
				<Наименование>Справочник: Клиенты</Наименование>
				<Порядок>900</Порядок>
				<ПередВыгрузкой>ПреобразованныйКод = ПривестиНомерКДлине(Источник.Код, 10);

Если Источник.Код &lt;&gt; ПривестиНомерКДлине(ПреобразованныйКод, 9)
	И СтрДлина(СокрЛП(Источник.Код)) &gt; 5 Тогда
	Сообщить("Неверный формат кода номенклатуры. Объект не выгружен: " + Источник);
	Отказ = Истина;
КонецЕсли;

НеСоздаватьЕслиНеНайден = Параметры.НеСоздаватьНовыеЭлементыСправочников;</ПередВыгрузкой>
				<Источник>СправочникСсылка.Клиенты</Источник>
				<Приемник>СправочникСсылка.Клиенты</Приемник>
				<Свойства>
					<Свойство>
						<Код>4</Код>
						<Наименование>ДатаОбновления --&gt; ДатаОбновления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ДатаОбновления" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаОбновления" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ДатаРегистрации --&gt; ДатаРегистрации</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ДатаРегистрации" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаРегистрации" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ДатаРождения --&gt; ДатаРождения</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ДопИнформация --&gt; ДопИнформация</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ДопИнформация" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ДопИнформация" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Число"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>НеУчаствуетВРассылках --&gt; НеУчаствуетВРассылках</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="НеУчаствуетВРассылках" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="НеУчаствуетВРассылках" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Пол --&gt; Пол</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Пол" Вид="Реквизит" Тип="ПеречислениеСсылка.ПолКлиента"/>
						<Приемник Имя="Пол" Вид="Реквизит" Тип="ПеречислениеСсылка.ПолКлиента"/>
						<КодПравилаКонвертации>ПолКлиента                                        </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Клиенты"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Клиенты"/>
						<КодПравилаКонвертации>Клиенты                                           </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>17</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Фирмы</Код>
				<Наименование>Справочник: Фирмы</Наименование>
				<Порядок>1050</Порядок>
				<ПередВыгрузкой>
НеСоздаватьЕслиНеНайден = Параметры.НеСоздаватьНовыеЭлементыСправочниковКадровыйУчет;</ПередВыгрузкой>
				<НеЗамещать>true</НеЗамещать>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.Фирмы</Источник>
				<Приемник>СправочникСсылка.Фирмы</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>5</ПриводитьКДлине>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>УР_ВидыИспользованияРабочегоВремени</Код>
				<Наименование>Справочник: Виды использования рабочего времени</Наименование>
				<Порядок>1100</Порядок>
				<ПередВыгрузкой>
НеСоздаватьЕслиНеНайден = Параметры.НеСоздаватьНовыеЭлементыСправочниковКадровыйУчет;</ПередВыгрузкой>
				<НеЗамещать>true</НеЗамещать>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.УР_ВидыИспользованияРабочегоВремени</Источник>
				<Приемник>СправочникСсылка.УР_ВидыИспользованияРабочегоВремени</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Больничный --&gt; Больничный</Наименование>
						<Порядок>50</Порядок>
						<Источник>Больничный</Источник>
						<Приемник>Больничный</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Выходной --&gt; Выходной</Наименование>
						<Порядок>100</Порядок>
						<Источник>Выходной</Источник>
						<Приемник>Выходной</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Опоздание --&gt; Опоздание</Наименование>
						<Порядок>150</Порядок>
						<Источник>Опоздание</Источник>
						<Приемник>Опоздание</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Отпуск --&gt; Отпуск</Наименование>
						<Порядок>200</Порядок>
						<Источник>Отпуск</Источник>
						<Приемник>Отпуск</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Прогул --&gt; Прогул</Наименование>
						<Порядок>250</Порядок>
						<Источник>Прогул</Источник>
						<Приемник>Прогул</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>Явка --&gt; Явка</Наименование>
						<Порядок>300</Порядок>
						<Источник>Явка</Источник>
						<Приемник>Явка</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>Должности</Код>
				<Наименование>Справочник: Должности</Наименование>
				<Порядок>1150</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.Должности</Источник>
				<Приемник>СправочникСсылка.Должности</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ГлБух --&gt; ГлБух</Наименование>
						<Порядок>50</Порядок>
						<Источник>ГлБух</Источник>
						<Приемник>ГлБух</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Руководитель --&gt; Руководитель</Наименование>
						<Порядок>100</Порядок>
						<Источник>Руководитель</Источник>
						<Приемник>Руководитель</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>УР_Подразделения</Код>
				<Наименование>Справочник: Подразделения</Наименование>
				<Порядок>1200</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>СправочникСсылка.УР_Подразделения</Источник>
				<Приемник>СправочникСсылка.УР_Подразделения</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.УР_Подразделения"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.УР_Подразделения"/>
						<КодПравилаКонвертации>УР_Подразделения                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>5</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>100</Порядок>
			<Правило>
				<Код>УР_ОтчетФО</Код>
				<Наименование>Документ: Отчет ФО</Наименование>
				<Порядок>50</Порядок>
				<ПослеЗагрузки>Объект.Автор								= ПараметрыСеанса.ТекущийПользователь;
Объект.Фирма								= Объект.ГруппаОплаты.Фирма;
Объект.АвторИзменения						= ПараметрыСеанса.ТекущийПользователь;
Объект.ДатаИзменения						= ТекущаяДата();
Объект.КатегорияЦен							= ПолучитьКатегориюЦенСклада(Объект.Склад);
Объект.ВалютаДокумента						= Константы.ВалютаРегламентированногоУчета.Получить();
Объект.ВидОперации							= Перечисления.УР_ВидыОперацийОтчетФО.FrontOfficeV3;

Если НЕ ЗначениеЗаполнено(Объект.Фирма) Тогда
	Объект.Фирма = ПолучитьЗначениеПоУмолчанию(ПараметрыСеанса.ТекущийПользователь, "ОсновнаяФирма");
КонецЕсли;

Для Каждого СтрокаТЧ Из Объект.Товары Цикл
	Если НЕ ЗначениеЗаполнено(СтрокаТЧ.Номенклатура)
		И ЗначениеЗаполнено(СтрокаТЧ.ХарактеристикаНоменклатуры) Тогда
		СтрокаТЧ.Номенклатура = СтрокаТЧ.ХарактеристикаНоменклатуры.Владелец;
	КонецЕсли;
	Если НЕ СтрокаТЧ.Контрагент.ЭтоГруппа Тогда
		СтрокаТЧ.ДоговорКонтрагента = ПолучитьДоговорКонтрагентаДляФирмы(СтрокаТЧ.Контрагент, Объект.Фирма);
		
		Если ЗначениеЗаполнено(СтрокаТЧ.Контрагент) И ЗначениеЗаполнено(Объект.Фирма) Тогда
			
			ТекущийТО = ПараметрыСеанса.ТекущийТО;
			
			Запрос = Новый Запрос;
			Запрос.Текст = 
			"ВЫБРАТЬ
			|	ДоговорыКонтрагентов.Ссылка КАК ДоговорКонтрагента
			|ИЗ
			|	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
			|ГДЕ
			|	ДоговорыКонтрагентов.Владелец = &amp;Контрагент
			|	И ДоговорыКонтрагентов.Фирма = &amp;Фирма
			|	И (ДоговорыКонтрагентов.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровКонтрагентов.КуплиПродажи)
			|			ИЛИ ДоговорыКонтрагентов.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровКонтрагентов.СПокупателем))
			|	И ДоговорыКонтрагентов.ТорговыйОбъект = &amp;ТорговыйОбъект
			|
			|ОБЪЕДИНИТЬ ВСЕ
			|
			|ВЫБРАТЬ
			|	ДоговорыКонтрагентов.Ссылка
			|ИЗ
			|	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
			|ГДЕ
			|	ДоговорыКонтрагентов.Владелец = &amp;Контрагент
			|	И ДоговорыКонтрагентов.Фирма = &amp;Фирма
			|	И (ДоговорыКонтрагентов.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровКонтрагентов.КуплиПродажи)
			|			ИЛИ ДоговорыКонтрагентов.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровКонтрагентов.СПокупателем))
			|	И ДоговорыКонтрагентов.ТорговыйОбъект = ЗНАЧЕНИЕ(Справочник.ТорговыеОбъекты.ПустаяСсылка)";
			
			Запрос.УстановитьПараметр("Контрагент"    , СтрокаТЧ.Контрагент);
			Запрос.УстановитьПараметр("Фирма"         , Объект.Фирма);
			Запрос.УстановитьПараметр("ТорговыйОбъект", ТекущийТО);
			
			Выборка = Запрос.Выполнить().Выбрать();
			
			Если Выборка.Следующий() Тогда
				
				СтрокаТЧ.ДоговорКонтрагента = Выборка.ДоговорКонтрагента;
				
			Иначе
				
				НовыйДоговор = Справочники.ДоговорыКонтрагентов.СоздатьЭлемент();
				НовыйДоговор.ВалютаВзаиморасчетов = Константы.ВалютаРегламентированногоУчета.Получить();
				НовыйДоговор.Владелец             = СтрокаТЧ.Контрагент;
				новыйДоговор.ВидДоговора          = Перечисления.ВидыДоговоровКонтрагентов.СПокупателем;
				НовыйДоговор.Фирма                = Объект.Фирма;
				НовыйДоговор.Наименование         = "Основной договор, " + Объект.Фирма;
				НовыйДоговор.ОбменДанными.Загрузка= Истина;
				ОграничениеДоступа.УстановитьТорговыйОбъект(НовыйДоговор.ТорговыйОбъект);
				
				НовыйДоговор.Записать();
				
				СтрокаТЧ.ДоговорКонтрагента = НовыйДоговор.Ссылка;
				
			КонецЕсли; 		
		КонецЕсли;
		
	КонецЕсли;
КонецЦикла;

Для Каждого СтрокаТЧ ИЗ Объект.Специфики Цикл
	Если НЕ ЗначениеЗаполнено(СтрокаТЧ.Номенклатура)
		И ЗначениеЗаполнено(СтрокаТЧ.ХарактеристикаНоменклатуры) Тогда
		СтрокаТЧ.Номенклатура = СтрокаТЧ.ХарактеристикаНоменклатуры.Владелец;
	КонецЕсли;
КонецЦикла;

// Установка значений единиц измерения в табличной части
СтрКомментарий = Объект.Комментарий;
ПозицияКодыЕдиниц = Найти(СтрКомментарий, "%СтруктураЕдиницИзмерения%");

Если НЕ ПозицияКодыЕдиниц = 0 Тогда
	ПодстрокаКодыЕдиниц = Сред(СтрКомментарий, ПозицияКодыЕдиниц + 26);
	
	СтруктураЕдиницИзмерения = ЗначениеИзСтрокиВнутр(ПодстрокаКодыЕдиниц);
	СтруктураЕдиницИзмеренияТовары = СтруктураЕдиницИзмерения.СтруктураЕдиницИзмеренияТовары;
	СтруктураЕдиницИзмеренияСпецифики = СтруктураЕдиницИзмерения.СтруктураЕдиницИзмеренияСпецифики;
	
	Для Каждого ЗначениеСтруктуры ИЗ СтруктураЕдиницИзмеренияТовары Цикл
		Попытка
			ТекущийНомерСтроки = Число(Сред(ЗначениеСтруктуры.Ключ, 12));
			СтрокаТабличнойЧасти = Объект.Товары[ТекущийНомерСтроки-1];
			КодЕдиницы = ЗначениеСтруктуры.Значение;
			
			ЭлементСправочникаКлассификаторЕдиницИзмерения = Справочники.КлассификаторЕдиницИзмерения.НайтиПоКоду(КодЕдиницы);
			
			Если НЕ ЭлементСправочникаКлассификаторЕдиницИзмерения.Пустая() Тогда
				СтрокаТабличнойЧасти.ЕдиницаИзмерения = Справочники.ЕдиницыИзмерения.НайтиПоРеквизиту("ЕдиницаПоКлассификатору", ЭлементСправочникаКлассификаторЕдиницИзмерения, , СтрокаТабличнойЧасти.Номенклатура);
				ПриИзмененииЕдиницыТабЧасти(СтрокаТабличнойЧасти, Объект);
			КонецЕсли;
		Исключение
		КонецПопытки;
		
	КонецЦикла;
		
	Для Каждого ЗначениеСтруктуры ИЗ СтруктураЕдиницИзмеренияСпецифики Цикл
		Попытка
			ТекущийНомерСтроки = Число(Сред(ЗначениеСтруктуры.Ключ, 12));
			СтрокаТабличнойЧасти = Объект.Специфики[ТекущийНомерСтроки-1];
			КодЕдиницы = ЗначениеСтруктуры.Значение;
			
			ЭлементСправочникаКлассификаторЕдиницИзмерения = Справочники.КлассификаторЕдиницИзмерения.НайтиПоКоду(КодЕдиницы);
			
			Если НЕ ЭлементСправочникаКлассификаторЕдиницИзмерения.Пустая() Тогда
				СтрокаТабличнойЧасти.ЕдиницаИзмерения = Справочники.ЕдиницыИзмерения.НайтиПоРеквизиту("ЕдиницаПоКлассификатору", ЭлементСправочникаКлассификаторЕдиницИзмерения, , СтрокаТабличнойЧасти.Номенклатура);
				ПриИзмененииЕдиницыТабЧасти(СтрокаТабличнойЧасти, Объект);
			КонецЕсли;
		Исключение
		КонецПопытки;
		
	КонецЦикла;
		
	Объект.Комментарий = Лев(СтрКомментарий, ПозицияКодыЕдиниц - 1);
	
КонецЕсли;

мУчитыватьНДС = ПолучитьЗначениеПоУмолчанию(ПараметрыСеанса.ТекущийТО, "УР_ЗначениеФлагаУчитыватьНДСПриЗагрузкеОтчетаФО");
мСуммаВключаетНДС = Ложь;

// Определяем параметры учетной политики
УчетнаяПолитикаФирмы = ПолучитьУчетнуюПолитику(Объект.Дата, Объект.Фирма, Объект.Склад);
Если УчетнаяПолитикаФирмы &lt;&gt; Неопределено Тогда
	мУчитыватьНДС = мУчитыватьНДС И НЕ УчетнаяПолитикаФирмы.НеЯвляетсяПлательщикомНДС;
	мСуммаВключаетНДС = мУчитыватьНДС И УчетнаяПолитикаФирмы.СуммаВключаетНДС;
КонецЕсли;

Объект.УчитыватьНДС		= мУчитыватьНДС;
Объект.СуммаВключаетНДС = мСуммаВключаетНДС;

Если НЕ Объект.ТипРасхода = Перечисления.УР_ТипыРасхода.Возврат Тогда
	
	Объект.УР_АвтоматическиФормироватьДокументы	= ПолучитьЗначениеПоУмолчанию(ПараметрыСеанса.ТекущийТО, "УР_УстанавливатьФлагиФормированияПеремещенияВыпускаПродукции");
	Объект.УчитыватьОстаткиНоменклатуры			= Объект.УР_АвтоматическиФормироватьДокументы И ПолучитьЗначениеПоУмолчанию(ПараметрыСеанса.ТекущийТО, "УР_ЗначениеФлагаУчитыватьОстаткиНоменклатуры");
	Объект.ВключатьСпецификиВВыпускПродукции	= Объект.УР_АвтоматическиФормироватьДокументы И ПолучитьЗначениеПоУмолчанию(ПараметрыСеанса.ТекущийТО, "УР_ЗначениеФлагаВключатьСпецификиВВыпускПродукции");
	
Иначе
	
	Объект.УР_АвтоматическиФормироватьДокументы	= Ложь;
	Объект.УчитыватьОстаткиНоменклатуры			= Ложь;
	Объект.ВключатьСпецификиВВыпускПродукции	= Ложь;
	
КонецЕсли;</ПослеЗагрузки>
				<Источник>ДокументСсылка.ОтчетФО</Источник>
				<Приемник>ДокументСсылка.УР_ОтчетФО</Приемник>
				<Свойства>
					<Свойство>
						<Код>2</Код>
						<Наименование>ГруппаОплаты --&gt; ГруппаОплаты</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ГруппаОплаты" Вид="Реквизит" Тип="СправочникСсылка.ГруппыОплаты"/>
						<Приемник Имя="ГруппаОплаты" Вид="Реквизит" Тип="СправочникСсылка.УР_ГруппыОплаты"/>
						<КодПравилаКонвертации>УР_ГруппыОплаты                                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ИтоговаяСумма --&gt; ИтоговаяСумма</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ИтоговаяСумма" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="ИтоговаяСумма" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>ВременноеЗначение = ПривестиНомерКДлине(Источник.Номер, 12);
Значение = ПривестиНомерКДлине(ВременноеЗначение, 11);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.МестаРеализации"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>СуммаБезнал --&gt; СуммаБезнал</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="СуммаБезнал" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаБезнал" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>СуммаКредит --&gt; СуммаКредит</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СуммаКредит" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаКредит" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>СуммаНал --&gt; СуммаНал</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СуммаНал" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаНал" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>СуммаНеплательщик --&gt; СуммаНеплательщик</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="СуммаНеплательщик" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаНеплательщик" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>СуммаСкидок --&gt; СуммаСкидок</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="СуммаСкидок" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаСкидок" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>ТипРасхода --&gt; ТипРасхода</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ТипРасхода" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыРасхода"/>
						<Приемник Имя="ТипРасхода" Вид="Реквизит" Тип="ПеречислениеСсылка.УР_ТипыРасхода"/>
					</Свойство>
					<Свойство>
						<Код>34</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>СтруктураЕдиницИзмерения = Новый Структура;
СтруктураЕдиницИзмеренияТовары = Новый Структура;
СтруктураЕдиницИзмеренияСпецифики = Новый Структура;

СтрокаКодыЕдиницНом = "%СтруктураЕдиницИзмерения%";

Для Каждого СтрокаТЧ Из Источник.Товары Цикл
	СтруктураЕдиницИзмеренияТовары.Вставить("НомерСтроки"+Формат(СтрокаТЧ.НомерСтроки,"ЧГ="), СтрокаТЧ.ЕдиницаИзмерения.Код);
КонецЦикла;

Для Каждого СтрокаТЧ Из Источник.Специфики Цикл
	СтруктураЕдиницИзмеренияСпецифики.Вставить("НомерСтроки"+Формат(СтрокаТЧ.НомерСтроки,"ЧГ="), СтрокаТЧ.ЕдиницаИзмерения.Код);
КонецЦикла;

СтруктураЕдиницИзмерения.Вставить("СтруктураЕдиницИзмеренияТовары", СтруктураЕдиницИзмеренияТовары);
СтруктураЕдиницИзмерения.Вставить("СтруктураЕдиницИзмеренияСпецифики", СтруктураЕдиницИзмеренияСпецифики);

СтроковоеПредставлениеСтруктураЕдиницИзмерения = СтрокаКодыЕдиницНом + ЗначениеВСтрокуВнутр(СтруктураЕдиницИзмерения);

Значение = Источник.Комментарий + СтроковоеПредставлениеСтруктураЕдиницИзмерения;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>18</Код>
						<Наименование>Специфики --&gt; Специфики</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="Специфики" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Специфики" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Если глВерсия &gt; 1 Тогда
	КоллекцияОбъектов = Источник.Специфики.Выгрузить();
Иначе
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>20</Код>
							<Наименование> --&gt; ИдентификаторТовара</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИдентификаторТовара" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ИдентификаторТовара;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование> --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование> --&gt; Номенклатура</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>36</Код>
							<Наименование> --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						</Свойство>
					</Группа>
					<Группа>
						<Код>23</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередВыгрузкой>Если глВерсия &gt; 1 Тогда
	Если ОбъектКоллекции.ВариантОплаты.Тип = Перечисления.ТипыОплаты.Бонусы Тогда
	 Отказ = Истина;
	КонецЕсли;
КонецЕсли;</ПередВыгрузкой>
						<Свойство>
							<Код>25</Код>
							<Наименование>Идентификатор --&gt; Идентификатор</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Идентификатор" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Идентификатор" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>Контрагент --&gt; Контрагент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ОбъектКоллекции.Контрагент.ЭтоГруппа Тогда
	Отказ = Истина;
	Сообщить("В документе: " + Источник + ", в строке табличной части ""Товары"" номер """ + ОбъектКоллекции.НомерСтроки + """ реквизит контрагент является группой!", СтатусСообщения.Важное);
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>28</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>Номенклатура --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>30</Код>
							<Наименование>СуммаБезСкидки --&gt; СуммаБезСкидки</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="СуммаБезСкидки" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаБезСкидки" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>31</Код>
							<Наименование>СуммаБонусов --&gt; СуммаБонусов</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="СуммаБонусов" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаБонусов" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>33</Код>
							<Наименование>--&gt; ТипОплаты</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ТипОплаты" Вид="Реквизит" Тип="ПеречислениеСсылка.УР_ТипыОплаты"/>
							<КодПравилаКонвертации>УР_ТипыОплаты                                     </КодПравилаКонвертации>
							<ПередВыгрузкой>Если глВерсия &gt; 1 И
	(ОбъектКоллекции.ВариантОплаты.Тип = Перечисления.ТипыОплаты.НаФолио
	ИЛИ ОбъектКоллекции.ВариантОплаты.Тип = Перечисления.ТипыОплаты.НаНомер) Тогда
	 	Значение = Перечисления.ТипыОплаты.Безнал;
Иначе
	Значение = ОбъектКоллекции.ВариантОплаты.Тип;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
						</Свойство>
						<Свойство>
							<Код>40</Код>
							<Наименование>ВариантОплаты --&gt; ВариантОплаты</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="ВариантОплаты" Вид="Реквизит" Тип="СправочникСсылка.ВариантыОплаты"/>
							<Приемник Имя="ВариантОплаты" Вид="Реквизит" Тип="СправочникСсылка.УР_ВариантыОплаты"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>39</Код>
						<Наименование>РучноеИзменение --&gt; РучноеИзменение</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="РучноеИзменение" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="РучноеИзменение" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПриходныйКассовыйОрдер</Код>
				<Наименование>Документ: Начисление (удержание)</Наименование>
				<Порядок>100</Порядок>
				<ПередВыгрузкой>Отказ = Источник.Сумма &lt; 0</ПередВыгрузкой>
				<ПослеЗагрузки>ЗаполнитьШапкуДокумента(Объект, ПараметрыСеанса.ТекущийПользователь, Константы.ВалютаРегламентированногоУчета.Получить(), "Продажа");
Объект.АвторИзменения 	 	 = ПараметрыСеанса.ТекущийПользователь;
Объект.ДатаИзменения  	 	 = ТекущаяДата();
Объект.Фирма				 = Константы.УправленческаяФирма.Получить();
Объект.ВидОперации 			 = Перечисления.ВидыОперацийПКО.ПоступлениеДенег;
УстановитьНомерДокумента(Объект);

Объект.Касса = ПолучитьЗначениеПоУмолчанию(ПараметрыСеанса.ТекущийПользователь, "ОсновнаяКасса");
		
// Заполним табличные части.
Если Объект.ВзаиморасчетыПодробно.Количество() &gt; 0 Тогда
	Объект.ВзаиморасчетыПодробно.Очистить();
КонецЕсли;
	
СтрокаТЧ = Объект.ВзаиморасчетыПодробно.Добавить();
СтрокаТЧ.ДоговорКонтрагента      = ПолучитьДоговорКонтрагентаПоВидуОперации(Объект.Фирма, Объект.Контрагент, "СПокупателем");
СтрокаТЧ.Сумма                   = Объект.СуммаДокумента;

// Установка курса взаиморасчетов.
СтруктураКурсаДоговора = ПолучитьКурсВалюты(СтрокаТЧ.ДоговорКонтрагента, Объект.Дата);
СтрокаТЧ.КурсВзаиморасчетов      = СтруктураКурсаДоговора.Курс;
СтрокаТЧ.КратностьВзаиморасчетов = СтруктураКурсаДоговора.Кратность; 

РассчитатьСуммуВзаиморасчетовТабЧастиВзаиморасчеты(СтрокаТЧ, Объект);</ПослеЗагрузки>
				<Источник>ДокументСсылка.НачислениеБезнал</Источник>
				<Приемник>ДокументСсылка.ПриходныйКассовыйОрдер</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование> --&gt; Контрагент</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Значение = Источник.Клиент.Контрагент;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Сумма --&gt; СуммаДокумента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование> --&gt; Комментарий</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Значение =  "Введен на основании: Начисления (удержания) по картам № "+Источник.Номер+" от "+Источник.Дата;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>РасходныйКассовыйОрдер</Код>
				<Наименование>Документ: Начисление (удержание)</Наименование>
				<Порядок>150</Порядок>
				<ПередВыгрузкой>Отказ = Источник.Сумма &gt;= 0</ПередВыгрузкой>
				<ПослеЗагрузки>ЗаполнитьШапкуДокумента(Объект, ПараметрыСеанса.ТекущийПользователь, Константы.ВалютаРегламентированногоУчета.Получить(), "Покупка");
Объект.АвторИзменения 	 	 = ПараметрыСеанса.ТекущийПользователь;
Объект.ДатаИзменения  	 	 = ТекущаяДата();
Объект.Фирма				 = Константы.УправленческаяФирма.Получить();
УстановитьНомерДокумента(Объект);

Объект.ВидОперации 			 = Перечисления.ВидыОперацийРКО.ВыдачаДенег;
Объект.Касса = ПолучитьЗначениеПоУмолчанию(ПараметрыСеанса.ТекущийПользователь, "ОсновнаяКасса");
		
// Заполним табличные части.
Если Объект.ВзаиморасчетыПодробно.Количество() &gt; 0 Тогда
	Объект.ВзаиморасчетыПодробно.Очистить();
КонецЕсли;
	
СтрокаТЧ = Объект.ВзаиморасчетыПодробно.Добавить();
СтрокаТЧ.ДоговорКонтрагента      = ПолучитьДоговорКонтрагентаПоВидуОперации(Объект.Фирма, Объект.Контрагент, "СПокупателем");
СтрокаТЧ.Сумма                   = Объект.СуммаДокумента;

// Установка курса взаиморасчетов.
СтруктураКурсаДоговора = ПолучитьКурсВалюты(СтрокаТЧ.ДоговорКонтрагента, Объект.Дата);
СтрокаТЧ.КурсВзаиморасчетов      = СтруктураКурсаДоговора.Курс;
СтрокаТЧ.КратностьВзаиморасчетов = СтруктураКурсаДоговора.Кратность; 

РассчитатьСуммуВзаиморасчетовТабЧастиВзаиморасчеты(СтрокаТЧ, Объект);</ПослеЗагрузки>
				<Источник>ДокументСсылка.НачислениеБезнал</Источник>
				<Приемник>ДокументСсылка.РасходныйКассовыйОрдер</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование> --&gt; Контрагент</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Значение = Источник.Клиент.Контрагент;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Сумма --&gt; СуммаДокумента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<ПередВыгрузкой>Значение = -Источник.Сумма;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование> --&gt; Комментарий</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Значение =  "Введен на основании: Начисления (удержания) по картам № "+Источник.Номер+" от "+Источник.Дата;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>УР_ПланМеню</Код>
				<Наименование>Документ: Бронь</Наименование>
				<Порядок>200</Порядок>
				<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.ДокОснование) Тогда
	Отказ = истина;
КонецЕсли;
</ПередВыгрузкой>
				<ПослеЗагрузки>Объект.Автор			= ПараметрыСеанса.ТекущийПользователь;
Если Не ЗначениеЗаполнено(Объект.Фирма) Тогда
	Объект.Фирма			= ПолучитьЗначениеПоУмолчанию(ПараметрыСеанса.ТекущийПользователь, "ОсновнаяФирма");
КонецЕсли;

Объект.АвторИзменения	= ПараметрыСеанса.ТекущийПользователь;
Объект.ДатаИзменения	= ТекущаяДата();
Объект.КатегорияЦен		= ПолучитьКатегориюЦенСклада(Объект.Склад);
Объект.ВалютаДокумента	= Константы.ВалютаРегламентированногоУчета.Получить();
Объект.ВидОперации		= Перечисления.УР_ВидыОперацийПланМеню.БанкетФронт;

Для Каждого СтрокаТЧ Из Объект.Товары Цикл
	
	Если НЕ ЗначениеЗаполнено(СтрокаТЧ.Номенклатура)
		И ЗначениеЗаполнено(СтрокаТЧ.ХарактеристикаНоменклатуры) Тогда
		СтрокаТЧ.Номенклатура = СтрокаТЧ.ХарактеристикаНоменклатуры.Владелец;
	КонецЕсли;
	
	ЗаполнитьЕдиницуИзмеренияТабЧасти(СтрокаТЧ, ЭтотОбъект); 
	// Рассчитать реквизиты табличной части.
	РассчитатьСуммуТабЧасти(СтрокаТЧ, Объект);
	РассчитатьСуммуНДСТабЧасти(СтрокаТЧ, Объект);
	
	ТТК = сбПолучитьАктуальнуюТТК(СтрокаТЧ.Номенклатура, Объект.Дата, СтрокаТЧ.ХарактеристикаНоменклатуры, , Объект.Склад);
	Если ЗначениеЗаполнено(ТТК) Тогда
		СтрокаТЧ.Выход = СокрЛП(ТТК.ВыходБлюдаПечать);	
	Иначе
		СтрокаТЧ.Выход = "";
	КонецЕсли;
	
КонецЦикла;

Для Каждого СтрокаТЧ Из Объект.Специфики Цикл
	
	Если НЕ ЗначениеЗаполнено(СтрокаТЧ.Номенклатура)
		И ЗначениеЗаполнено(СтрокаТЧ.ХарактеристикаНоменклатуры) Тогда
		СтрокаТЧ.Номенклатура = СтрокаТЧ.ХарактеристикаНоменклатуры.Владелец;
	КонецЕсли;
	
	ЗаполнитьЕдиницуИзмеренияТабЧасти(СтрокаТЧ, ЭтотОбъект);
	
КонецЦикла;

Если НЕ ЗначениеЗаполнено(Объект.Номер) Тогда
	УстановитьНомерДокумента(Объект);
КонецЕсли;
</ПослеЗагрузки>
				<Источник>ДокументСсылка.Бронь</Источник>
				<Приемник>ДокументСсылка.УР_ПланМеню</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.ДокОснование) Тогда
	Значение = Источник.ДокОснование.Дата;
Иначе
	Значение = Источник.Дата;
КонецЕсли;
</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>3</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>4</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество * ОбъектКоллекции.Товар.КоэфПересчета;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование> --&gt; Номенклатура</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Товар.Номенклатура;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование> --&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Товар.Номенклатура;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>8</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>11</Код>
						<Наименование>--&gt; Номер</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>11</ПриводитьКДлине>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.ДокОснование) Тогда
	Значение = Источник.ДокОснование.Номер;
Иначе
	Значение = Неопределено;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>--&gt; Склад</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ПосадочныеМеста.Количество() &gt; 0 Тогда
	Значение = Источник.ПосадочныеМеста[0].ПосадочноеМесто.МестоРеализации;
КонецЕсли;                                 
</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>13</Код>
						<Наименование>Специфики --&gt; Специфики</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Специфики" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Специфики" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = Источник.Товары[ОбъектКоллекции.НомерСтрокиТовара - 1].Количество * ОбъектКоллекции.Специфика.КоэфПересчета;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Специфика.Номенклатура;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>--&gt; ХарактеристикаНоменклатуры</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ХарактеристикаНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ХарактеристикиНоменклатуры"/>
							<КодПравилаКонвертации>ХарактеристикиНоменклатуры                        </КодПравилаКонвертации>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Специфика.Номенклатура;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>17</Код>
						<Наименование>Фирма --&gt; Фирма</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Фирма" Вид="Реквизит" Тип="СправочникСсылка.Фирмы"/>
						<Приемник Имя="Фирма" Вид="Реквизит" Тип="СправочникСсылка.Фирмы"/>
						<КодПравилаКонвертации>Фирмы                                             </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>УР_ОтражениеВыполненияГрафикаРаботы</Код>
				<Наименование>Документ: Фактическая выработка</Наименование>
				<Порядок>250</Порядок>
				<ПослеЗагрузки>Если ЗначениеЗаполнено(Объект.Сотрудник) Тогда

	// Таблица данные по трудоустройству
	Запрос = Новый Запрос;
	Запрос.Текст = "ВЫБРАТЬ
	               |	ДанныеПоТрудоустройствуСотрудников.Период,
	               |	ДанныеПоТрудоустройствуСотрудников.Фирма,
	               |	ДанныеПоТрудоустройствуСотрудников.Сотрудник,
	               |	ДанныеПоТрудоустройствуСотрудников.Должность,
	               |	ДанныеПоТрудоустройствуСотрудников.КоличествоСтавок,
	               |	ДанныеПоТрудоустройствуСотрудников.ГрафикРаботы,
	               |	ДанныеПоТрудоустройствуСотрудников.Регистратор,
	               |	ДанныеПоТрудоустройствуСотрудников.Подразделение
	               |ИЗ
	               |	РегистрСведений.УР_ДанныеПоТрудоустройствуСотрудников.СрезПоследних(
	               |			&amp;Дата,
	               |				Сотрудник = &amp;Сотрудник
				   |		"+?(ЗначениеЗаполнено(Объект.Фирма),"И Фирма = &amp;Фирма", "")+"
				   |		"+?(ЗначениеЗаполнено(Объект.Должность),"И Должность = &amp;Должность", "")+"
				   |		) КАК ДанныеПоТрудоустройствуСотрудников
	               |ГДЕ
	               |	ДанныеПоТрудоустройствуСотрудников.КоличествоСтавок &gt; 0";
	
	Запрос.УстановитьПараметр("Дата",Объект.Дата);
	Запрос.УстановитьПараметр("Сотрудник", Объект.Сотрудник);
	Запрос.УстановитьПараметр("Фирма", Объект.Фирма);
	Запрос.УстановитьПараметр("Должность", Объект.Должность);

	ТЗ = Запрос.Выполнить().Выгрузить();
	
	ВыбраннаяСтрока = Неопределено;
	
	Если ТЗ.Количество() = 0 Тогда
		Сообщить("Нет данных о трудоустройстве сотрудника: " + Объект.Сотрудник + " на дату: "+ Объект.Дата + 
				?(ЗначениеЗаполнено(Объект.Должность), " в должности: " + Объект.Должность, "") +
				?(ЗначениеЗаполнено(Объект.Фирма), " устроенного на работу в фирму: " + Объект.Фирма, ""));
	// Если сотрудник только на одной должности	
	ИначеЕсли ТЗ.Количество() = 1 Тогда
		ВыбраннаяСтрока	= ТЗ[0];
		
		//Если НЕ ЗначениеЗаполнено(Объект.Фирма) Тогда
			Объект.Фирма		 = ВыбраннаяСтрока.Фирма;
		//КонецЕсли;
		//Если НЕ ЗначениеЗаполнено(Объект.Подразделение) Тогда
			Объект.Подразделение = ВыбраннаяСтрока.Подразделение;
		//КонецЕсли;
		//Если НЕ ЗначениеЗаполнено(Объект.Должность) Тогда
			Объект.Должность	 = ВыбраннаяСтрока.Должность;
		//КонецЕсли;
		//Если НЕ ЗначениеЗаполнено(Объект.ГрафикРаботы) Тогда
			Объект.ГрафикРаботы	 = ВыбраннаяСтрока.ГрафикРаботы;
		//КонецЕсли;
		
	КонецЕсли;
	
	
КонецЕсли;</ПослеЗагрузки>
				<Источник>ДокументСсылка.ФактическаяВыработка</Источник>
				<Приемник>ДокументСсылка.УР_ОтражениеВыполненияГрафикаРаботы</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<ПриводитьКДлине>11</ПриводитьКДлине>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Сотрудник --&gt; Сотрудник</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Сотрудник" Вид="Реквизит" Тип="СправочникСсылка.Сотрудники"/>
						<Приемник Имя="Сотрудник" Вид="Реквизит" Тип="СправочникСсылка.Сотрудники"/>
						<КодПравилаКонвертации>Сотрудники                                        </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Утвердил --&gt; Утвердил</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Утвердил" Вид="Реквизит" Тип="СправочникСсылка.Сотрудники"/>
						<Приемник Имя="Утвердил" Вид="Реквизит" Тип="СправочникСсылка.Сотрудники"/>
						<КодПравилаКонвертации>Сотрудники                                        </КодПравилаКонвертации>
					</Свойство>
					<Группа>
						<Код>10</Код>
						<Наименование>ДетальныйУчетВремени --&gt; РабочееВремя</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ДетальныйУчетВремени" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="РабочееВремя" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>
Запрос = Новый Запрос;
Запрос.Текст =

"ВЫБРАТЬ
|	МИНИМУМ(ДетальныйУчетВремени.ВремяНачала) КАК ВремяНачала,
|	МАКСИМУМ(ДетальныйУчетВремени.ВремяОкончания) КАК ВремяОкончания,
|	ДетальныйУчетВремени.ВидИспользованияРабочегоВремени КАК ВидИспользованияРабочегоВремени,
|	СУММА(ЕСТЬNULL(РАЗНОСТЬДАТ(НАЧАЛОПЕРИОДА(ДетальныйУчетВремени.Длительность, ДЕНЬ), ДетальныйУчетВремени.Длительность, МИНУТА), 0)) / 60 КАК Длительность
|ИЗ
|	Документ.ФактическаяВыработка.ДетальныйУчетВремени КАК ДетальныйУчетВремени
|ГДЕ
|	ДетальныйУчетВремени.Ссылка.ПометкаУдаления = ЛОЖЬ
|	И ДетальныйУчетВремени.Ссылка = &amp;Ссылка
|
|СГРУППИРОВАТЬ ПО
|	ДетальныйУчетВремени.ВидИспользованияРабочегоВремени";

Запрос.УстановитьПараметр("Ссылка", Источник);

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>11</Код>
							<Наименование>ВидИспользованияРабочегоВремени --&gt; ВидВремени</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ВидИспользованияРабочегоВремени" Вид="Реквизит" Тип="СправочникСсылка.УР_ВидыИспользованияРабочегоВремени"/>
							<Приемник Имя="ВидВремени" Вид="Реквизит" Тип="СправочникСсылка.УР_ВидыИспользованияРабочегоВремени"/>
							<КодПравилаКонвертации>УР_ВидыИспользованияРабочегоВремени               </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>ВремяНачала --&gt; ВремяНачала</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ВремяНачала" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ВремяНачала" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>ВремяОкончания --&gt; ВремяОкончания</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ВремяОкончания" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ВремяОкончания" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Длительность --&gt; ДлительностьОбщая</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Длительность" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДлительностьОбщая" Вид="Реквизит" Тип="Число"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>15</Код>
						<Наименование> --&gt; Комментарий</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Значение = "Загружено из программы ""Трактиръ: Front-Office""";</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>Должность --&gt; Должность</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Должность" Вид="Реквизит" Тип="СправочникСсылка.Должности"/>
						<Приемник Имя="Должность" Вид="Реквизит" Тип="СправочникСсылка.Должности"/>
						<КодПравилаКонвертации>Должности                                         </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>Подразделение --&gt; Подразделение</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.УР_Подразделения"/>
						<Приемник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.УР_Подразделения"/>
						<КодПравилаКонвертации>УР_Подразделения                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>Фирма --&gt; Фирма</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Фирма" Вид="Реквизит" Тип="СправочникСсылка.Фирмы"/>
						<Приемник Имя="Фирма" Вид="Реквизит" Тип="СправочникСсылка.Фирмы"/>
						<КодПравилаКонвертации>Фирмы                                             </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления</Наименование>
			<Порядок>150</Порядок>
			<Правило>
				<Код>УР_ТипыРасхода</Код>
				<Наименование>Перечисление: Типы расхода</Наименование>
				<Порядок>50</Порядок>
				<Источник>ПеречислениеСсылка.ТипыРасхода</Источник>
				<Приемник>ПеречислениеСсылка.УР_ТипыРасхода</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Возврат --&gt; Возврат</Наименование>
						<Порядок>50</Порядок>
						<Источник>Возврат</Источник>
						<Приемник>Возврат</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Реализация --&gt; Реализация</Наименование>
						<Порядок>100</Порядок>
						<Источник>Реализация</Источник>
						<Приемник>Реализация</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Списание --&gt; Списание</Наименование>
						<Порядок>150</Порядок>
						<Источник>Списание</Источник>
						<Приемник>Списание</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ВозвратСуммы --&gt; ВозвратСуммы</Наименование>
						<Порядок>200</Порядок>
						<Источник>ВозвратСуммы</Источник>
						<Приемник>ВозвратСуммы</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>УР_ТипыОплаты</Код>
				<Наименование>Перечисление: Типы оплаты</Наименование>
				<Порядок>100</Порядок>
				<Источник>ПеречислениеСсылка.ТипыОплаты</Источник>
				<Приемник>ПеречислениеСсылка.УР_ТипыОплаты</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Безнал --&gt; Безнал</Наименование>
						<Порядок>50</Порядок>
						<Источник>Безнал</Источник>
						<Приемник>Безнал</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Карта --&gt; Карта</Наименование>
						<Порядок>150</Порядок>
						<Источник>Карта</Источник>
						<Приемник>Карта</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Нал --&gt; Нал</Наименование>
						<Порядок>200</Порядок>
						<Источник>Нал</Источник>
						<Приемник>Нал</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Неплательщик --&gt; Неплательщик</Наименование>
						<Порядок>250</Порядок>
						<Источник>Неплательщик</Источник>
						<Приемник>Неплательщик</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>Бонусы --&gt; Бонусы</Наименование>
						<Порядок>300</Порядок>
						<Источник>Бонусы</Источник>
						<Приемник>Бонусы</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>НаНомер --&gt; Безнал</Наименование>
						<Порядок>350</Порядок>
						<Источник>НаНомер</Источник>
						<Приемник>Безнал</Приемник>
					</Значение>
					<Значение>
						<Код>8</Код>
						<Наименование>НаФолио --&gt; Безнал</Наименование>
						<Порядок>400</Порядок>
						<Источник>НаФолио</Источник>
						<Приемник>Безнал</Приемник>
					</Значение>
					<Значение>
						<Код>9</Код>
						<Наименование>Сертификат --&gt; Неплательщик</Наименование>
						<Порядок>450</Порядок>
						<Источник>Сертификат</Источник>
						<Приемник>Сертификат</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ПолКлиента</Код>
				<Наименование>Перечисление: ПолКлиента</Наименование>
				<Порядок>150</Порядок>
				<Источник>ПеречислениеСсылка.ПолКлиента</Источник>
				<Приемник>ПеречислениеСсылка.ПолКлиента</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Женский --&gt; Женский</Наименование>
						<Порядок>50</Порядок>
						<Источник>Женский</Источник>
						<Приемник>Женский</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Мужской --&gt; Мужской</Наименование>
						<Порядок>100</Порядок>
						<Источник>Мужской</Источник>
						<Приемник>Мужской</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыОплаты</Код>
				<Наименование>:</Наименование>
				<Порядок>200</Порядок>
				<Источник>ПеречислениеСсылка.ТипыОплаты</Источник>
				<Приемник>ПеречислениеСсылка.ТипыОплаты</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование> --&gt; БанковскиеКарты</Наименование>
						<Порядок>50</Порядок>
						<Источник>Карта</Источник>
						<Приемник>БанковскиеКарты</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование> --&gt; Наличные</Наименование>
						<Порядок>100</Порядок>
						<Источник>Нал</Источник>
						<Приемник>Наличные</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование> --&gt; Прочие</Наименование>
						<Порядок>150</Порядок>
						<Источник>Безнал</Источник>
						<Приемник>Прочие</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Бонусы --&gt; Прочие</Наименование>
						<Порядок>200</Порядок>
						<Источник>Бонусы</Источник>
						<Приемник>Прочие</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>Неплательщик --&gt; Прочие</Наименование>
						<Порядок>350</Порядок>
						<Источник>Неплательщик</Источник>
						<Приемник>Прочие</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Группа Отключить="false">
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>50</Порядок>
			<Правило Отключить="false">
				<Код>ОтчетФО</Код>
				<Наименование>ОтчетФО</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>УР_ОтчетФО                                        </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ОтчетФО</ОбъектВыборки>
			</Правило>
			<Правило Отключить="true">
				<Код>НачислениеБезнал</Код>
				<Наименование>Начисление</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>ПриходныйКассовыйОрдер                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.НачислениеБезнал</ОбъектВыборки>
			</Правило>
			<Правило Отключить="true">
				<Код>Удержание</Код>
				<Наименование>Удержание</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>РасходныйКассовыйОрдер                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.НачислениеБезнал</ОбъектВыборки>
			</Правило>
			<Правило Отключить="true">
				<Код>Бронь</Код>
				<Наименование>Бронь</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>УР_ПланМеню                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.Бронь</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ФактическаяВыработка</Код>
				<Наименование>Фактическая выработка</Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>УР_ОтражениеВыполненияГрафикаРаботы               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ФактическаяВыработка</ОбъектВыборки>
			</Правило>
		</Группа>
		<Правило Отключить="true">
			<Код>ПереносДокументоЗаказИВозврат</Код>
			<Наименование>Перенос документов "Заказ" и "Возврат"</Наименование>
			<Порядок>100</Порядок>
			<КодПравилаКонвертации>Чеки                                              </КодПравилаКонвертации>
			<СпособОтбораДанных>ПроизвольныйАлгоритм</СпособОтбораДанных>
			<ПередОбработкойПравила>Запрос = Новый Запрос;

Запрос.Текст = 	"ВЫБРАТЬ
				|	ЗаказТовары.Товар.Номенклатура КАК Номенклатура,
				|	ЗаказТовары.Товар.Номенклатура КАК ХарактеристикаНоменклатуры,
				|	ЗаказТовары.Количество * ЗаказТовары.Товар.КоэфПересчета КАК Количество,
				|	ЗаказТовары.ЦенаРеализации КАК Цена,
				|	ЗаказТовары.Сумма - ЗаказТовары.СуммаРеализации КАК СуммаСкидки,
				|	ЗаказТовары.СуммаРеализации КАК Сумма,
				|	ЗаказТовары.ГруппаОплаты,
				|	ЗаказДопИнф.Заказ КАК Заказ,
				|	ЗаказДопИнф.ДатаОткрытия КАК ДатаОткрытия,
				|	ЗаказДопИнф.ДатаЗакрытия КАК ДатаЗакрытия,
				|	ЗаказДопИнф.ПротоколРасчетов КАК ПротоколРасчетов
				|ИЗ
				|	Документ.Заказ.Товары КАК ЗаказТовары
				|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ЗаказДопИнф КАК ЗаказДопИнф
				|		ПО ЗаказТовары.Ссылка = ЗаказДопИнф.Заказ
				|ГДЕ
				|	ЗаказДопИнф.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыЗаказа.Закрыт)
				|	И ЗаказДопИнф.ДатаЗакрытия МЕЖДУ &amp;ДатаС И &amp;ДатаПо
				|	И ЗаказТовары.Количество &lt;&gt; 0
				|
				|ОБЪЕДИНИТЬ ВСЕ
				|
				|ВЫБРАТЬ
				|	ВозвратТовары.Товар.Номенклатура,
				|	ВозвратТовары.Товар.Номенклатура,
				|	ВозвратТовары.Количество * ВозвратТовары.Товар.КоэфПересчета,
				|	ВЫБОР
				|		КОГДА ВозвратТовары.Количество &lt;&gt; 0
				|			ТОГДА ВозвратТовары.Сумма / ВозвратТовары.Количество
				|		ИНАЧЕ 0
				|	КОНЕЦ,
				|	0,
				|	ВозвратТовары.Сумма,
				|	ВозвратТовары.ГруппаОплаты,
				|	ВозвратТовары.Ссылка,          		// Для возврата в качестве заказа запишем документ возврат
				|	ВозвратТовары.Ссылка.Дата,
				|	ВозвратТовары.Ссылка.Дата,
				|	Неопределено						// Протокола расчетов нет			
				|ИЗ
				|	Документ.Возврат.Товары КАК ВозвратТовары
				|ИТОГИ
				|	МАКСИМУМ(ДатаОткрытия),
				|	МАКСИМУМ(ДатаЗакрытия),
				|	МАКСИМУМ(ПротоколРасчетов)
				|ПО
				|	Заказ";				
Запрос.УстановитьПараметр("ДатаС", ДатаНачала);
Запрос.УстановитьПараметр("ДатаПо", ДатаОкончания);

ВыборкаПоЗаказам = Запрос.Выполнить().Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);

ТаблицаТоваров = Новый ТаблицаЗначений;
ТаблицаТоваров.Колонки.Добавить("Номенклатура");
ТаблицаТоваров.Колонки.Добавить("ХарактеристикаНоменклатуры");
ТаблицаТоваров.Колонки.Добавить("Сумма");
ТаблицаТоваров.Колонки.Добавить("СуммаСкидки");
ТаблицаТоваров.Колонки.Добавить("Цена");
ТаблицаТоваров.Колонки.Добавить("Количество");

ТаблицаСкидок = Новый ТаблицаЗначений;
ТаблицаСкидок.Колонки.Добавить("КодСкидки");
ТаблицаСкидок.Колонки.Добавить("Сумма");

ТаблицаОплат = Новый ТаблицаЗначений;
ТаблицаОплат.Колонки.Добавить("ВидОплаты");
ТаблицаОплат.Колонки.Добавить("Сумма");

Пока ВыборкаПоЗаказам.Следующий() Цикл
	ИсходящиеДанные = Новый Структура; 
	
	ИсходящиеДанные.Вставить("ДатаОткрытия"	, ВыборкаПоЗаказам.ДатаОткрытия);
	ИсходящиеДанные.Вставить("ДатаЗакрытия"	, ВыборкаПоЗаказам.ДатаЗакрытия);
	ИсходящиеДанные.Вставить("Склад"		, ВыборкаПоЗаказам.Заказ.МестоРеализации);
	Если ВыборкаПоЗаказам.ПротоколРасчетов &lt;&gt; Неопределено Тогда
		ИсходящиеДанные.Вставить("Сумма"	, ВыборкаПоЗаказам.ПротоколРасчетов.ИтогСуммаФакт);
		ИсходящиеДанные.Вставить("КассирККМ", ВыборкаПоЗаказам.ПротоколРасчетов.Автор);
		ИсходящиеДанные.Вставить("Кассир"	, ВыборкаПоЗаказам.ПротоколРасчетов.Автор.Код);
		ИсходящиеДанные.Вставить("ТипЧека"	, "Продажа");
		ИсходящиеДанные.Вставить("КоличествоГостей", ВыборкаПоЗаказам.Заказ.КоличествоПосетителей);
	Иначе
		ИсходящиеДанные.Вставить("Сумма"	, ВыборкаПоЗаказам.Заказ.Сумма);
		ИсходящиеДанные.Вставить("КассирККМ", ВыборкаПоЗаказам.Заказ.Автор);
		ИсходящиеДанные.Вставить("Кассир"	, ВыборкаПоЗаказам.Заказ.Автор.Код);
		ИсходящиеДанные.Вставить("ТипЧека"	, "Возврат");
		ИсходящиеДанные.Вставить("КоличествоГостей", 1);
	КонецЕсли;
	
	ИсходящиеДанные.Вставить("ТО"			, Неопределено);
	ИсходящиеДанные.Вставить("НомерРМ"		, ВыборкаПоЗаказам.Заказ.МестоРеализации.Код);
	ИсходящиеДанные.Вставить("Сотрудник"	, ВыборкаПоЗаказам.Заказ.Автор);
	ИсходящиеДанные.Вставить("КодСотрудника", ВыборкаПоЗаказам.Заказ.Автор.Код);
	ИсходящиеДанные.Вставить("НомерСмены"	, ВыборкаПоЗаказам.Заказ.Смена.Номер);
	ИсходящиеДанные.Вставить("Номер"		, ВыборкаПоЗаказам.Заказ.Номер);
	ИсходящиеДанные.Вставить("Клиент"		, ВыборкаПоЗаказам.Заказ.Клиент);
	ИсходящиеДанные.Вставить("Статус"		, "Закрыт");
	ИсходящиеДанные.Вставить("Наименование"	, "Чек №" + ВыборкаПоЗаказам.Заказ.Номер);
	
	// Очистим таблицы
	ТаблицаТоваров.Очистить();
	ТаблицаСкидок.Очистить();
	ТаблицаОплат.Очистить();
	
	Если ВыборкаПоЗаказам.Заказ.ПолучитьОбъект().Метаданные().ТабличныеЧасти.Найти("Скидки") &lt;&gt; Неопределено Тогда
		Для Каждого СтрокаСкидка ИЗ ВыборкаПоЗаказам.Заказ.Скидки Цикл
			НоваяСкидка = ТаблицаСкидок.Добавить();
			НоваяСкидка.КодСкидки = СтрокаСкидка.Скидка.Код;
			НоваяСкидка.Сумма = СтрокаСкидка.Сумма;
		КонецЦикла;
	КонецЕсли;
	
	Если ВыборкаПоЗаказам.ПротоколРасчетов &lt;&gt; Неопределено Тогда
		Для Каждого СтрокаОплата ИЗ ВыборкаПоЗаказам.ПротоколРасчетов.Протокол Цикл
			Если СтрокаОплата.Действие = Перечисления.ДействияПриОплате.Взнос Тогда
				НоваяОплата = ТаблицаОплат.Добавить();
				НоваяОплата.ВидОплаты = СтрокаОплата.ВариантОплаты;
				НоваяОплата.Сумма = СтрокаОплата.СуммаФакт;
			КонецЕсли;
		КонецЦикла;
	Иначе
		Если ВыборкаПоЗаказам.Заказ.ВариантОплаты &lt;&gt; Неопределено Тогда
			НоваяОплата = ТаблицаОплат.Добавить();
			НоваяОплата.ВидОплаты = ВыборкаПоЗаказам.Заказ.ВариантОплаты;
			НоваяОплата.Сумма = ВыборкаПоЗаказам.Заказ.Сумма;
		КонецЕсли;
	КонецЕСли;
	
	ВыборкаСтрокаЗаказа = ВыборкаПоЗаказам.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	
	Пока ВыборкаСтрокаЗаказа.Следующий() Цикл
		ЗаполнитьЗначенияСвойств(ТаблицаТоваров.Добавить(), ВыборкаСтрокаЗаказа);
	КонецЦикла;
	
	
	ИсходящиеДанные.Вставить("Оплата", ТаблицаОплат); 
	ИсходящиеДанные.Вставить("Товары", ТаблицаТоваров); 
	ИсходящиеДанные.Вставить("Скидки", ТаблицаСкидок);
	
	ВыгрузитьПоПравилу(, , ИсходящиеДанные, , "Чеки");
	
КонецЦикла;</ПередОбработкойПравила>
		</Правило>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы/>
	<Запросы/>
</ПравилаОбмена>