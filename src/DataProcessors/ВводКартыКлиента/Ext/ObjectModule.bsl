// Обязательная процедура для работы с обработкой через ИнтерфейсРМ.ПолучитьОбъектОбработки()
// Вызывается каждый раз при обращении к объекту обработки.
// Здесь надо прописать сброс переменных в начальные значения
// Реквизиты и табличные части уже сброшены
Процедура УстановкаНачальныхЗначений() Экспорт
	
	НомерКартыДоступа = "";	
		
КонецПроцедуры

#Если ТолстыйКлиентОбычноеПриложение Тогда
Процедура ДействияПриОткрытии() Экспорт
	ИнтерфейсРМ.ВыводНаИнфоДисплей("Приглашение", Неопределено, Неопределено, Неопределено, Неопределено);
КонецПроцедуры

Процедура ДействияПриЗакрытии() Экспорт
	ИнтерфейсРМ.ВыводНаИнфоДисплей("Реклама", Неопределено, Неопределено, Неопределено, Неопределено);
КонецПроцедуры

Функция ПолучитьКартуДоступаПоИдентификатору(Идентификатор) Экспорт 
	
	Запрос = Новый Запрос("ВЫБРАТЬ
	|	КартыДоступа.Ссылка КАК КартаДоступа
	|ИЗ
	|	Справочник.КартыДоступа КАК КартыДоступа
	|ГДЕ
	|	КартыДоступа.ТипКарты = &Бэйдж
	|	И (КартыДоступа.Идентификатор = &Идентификатор
	|	ИЛИ КартыДоступа.Идентификатор1 = &Идентификатор
	|	ИЛИ КартыДоступа.Идентификатор2 = &Идентификатор)
	|	И НЕ КартыДоступа.ПометкаУдаления");
	
	Запрос.УстановитьПараметр("Бэйдж", ПредопределенноеЗначение("Перечисление.ТипыКартДоступа.Временная"));
	Запрос.УстановитьПараметр("Идентификатор", Идентификатор);
	
	Рез = Запрос.Выполнить();
	Если Рез.Пустой() Тогда
		КартаДоступа = Справочники.КартыДоступа.ПустаяСсылка();
	Иначе
		КартаДоступа = Рез.Выгрузить()[0][0];
	КонецЕсли;
	
	Возврат КартаДоступа;
		
КонецФункции

#КонецЕсли